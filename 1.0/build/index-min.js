/*! smartmenu - v1.0 - 2013-05-24 4:22:02 PM
* Copyright (c) 2013 satans17; Licensed  */
KISSY.add("gallery/smartmenu/1.0/index",function(a,b,c){function d(a){return a/180*Math.PI}function e(a,b,c,e,f){return{x:a+Math.sin(d(f*e))*c,y:b-Math.cos(d(f*e))*c}}function f(a){var b=this;f.superclass.constructor.call(b,a),b._init()}var g=b.all;return a.extend(f,c,{_init:function(){var a=this,b=g(a.get("trigger")),c=(g(a.get("items")),function(){a.hide()});a.set("trigger",b),b.on(a.get("triggerType"),function(b){b.halt(),a.toggle()}),a.on("afterVisibleChange",function(a){a.newVal===!0?g(document).on("click",c):g(document).detach("click",c)})},render:function(){var b=this,c=g('<div class="ks-funmenu-wrapper"></div>'),d=b.get("items");d=a.isString(d)?g(d):!a.isArray(d)||d instanceof a.Node?g(d):g(d.join("")),d.css({position:"absolute",display:"none"}),b.get("itemCls")&&d.addClass(b.get("itemCls")),d.appendTo(c),c.appendTo(document.body),b.set("items",g(d)),b.set("wrapper",c),b.set("isRender",!0)},_getXY:function(){var a=this,b=a.get("trigger"),c=b.offset();return{x:c.left+b.width()/2,y:c.top+b.height()/2}},show:function(){var b=this;b.get("isRender")||b.render();var c=(b.get("trigger"),b.get("items")),d=b._getXY(),f=b.get("direction"),g=b.get("distance"),h=b.get("startDeg"),i=b.get("intervalDeg"),j=b.get("duration"),k=b.get("easing"),l=b.get("anim");c.stop(!0),b.set("visible",!0),b.fire("show"),c.each(function(b,c){b.css({left:d.x-b.width()/2,top:d.y-b.height()/2,opacity:0}),a.later(function(a,b){return function(){var c=e(d.x,d.y,g,h+i*b,f);a.show().animate({left:c.x-a.width()/2,top:c.y-a.height()/2,opacity:1},j,k,function(){})}}(b,c),l*c)})},hide:function(){var b=this;duration=b.get("duration"),easing=b.get("easing"),items=b.get("items"),center=b._getXY(),anim=b.get("anim"),items.stop(!0),b.set("visible",!1),b.fire("hide"),items.each(function(b,c){a.later(function(a){return function(){a.animate({left:center.x-a.width()/2,top:center.y-a.height()/2,opacity:0},duration,easing,function(){a.hide()})}}(b),anim*c)})},toggle:function(){this.get("visible")?this.hide():this.show()},sync:function(){var a=this,b=(a.get("trigger"),a.get("items")),c=a.get("distance"),d=a.get("startDeg"),f=a.get("intervalDeg"),g=a.get("direction"),h=a.get("duration"),i=a.get("easing"),j=a._getXY();b.each(function(a,b){var k=e(j.x,j.y,c,d+f*b,g);a.show().animate({left:k.x-a.width()/2,top:k.y-a.height()/2,opacity:1},h,i,function(){})})}},{ATTRS:{wrapper:{value:{}},isRender:{value:!1},startDeg:{value:30},intervalDeg:{value:50},direction:{value:-1,validator:function(a){return 1===a||-1===a}},distance:{value:150},trigger:{value:null},items:{value:[]},triggerType:{value:a.UA.android||a.UA.ios?"tap":"click"},visible:{value:!1},duration:{value:.5},easing:{value:"backOut"},anim:{value:0},path:{value:!1},itemCls:{},zIndex:{value:999}}}),f},{requires:["node","base"]});